{"ast":null,"code":"var Web3 = require('web3');\n\n//let web3 = new Web3(window.web3.currentProvider)\nvar web3 = new Web3('http://localhost:8545');\n\n/*if (window.ethereum) {\n    // 请求用户授权\n    window.ethereum.enable(function(){\n        web3.eth.getAccounts((error, accounts) => {\n            web3.eth.defaultAccount = accounts[0];\n            console.log(accounts)\n        })\n    })\n\n} else  if (typeof web3 !== 'undefined') {\n    const web3 = new Web3(web3.currentProvider);\n    web3.eth.defaultAccount = web3.eth.accounts[0];\n    console.log(web3.eth.defaultAccount);\n} else {\n    // set the provider you want from Web3.providers\n    const web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));\n}*/\n\n// 检查是否是新的MetaMask 或 DApp浏览器\nvar web3Provider;\nif (window.ethereum) {\n  web3Provider = window.ethereum;\n  try {\n    // 请求用户授权\n    await window.ethereum.enable();\n  } catch (error) {\n    // 用户不授权时\n    console.error(\"User denied account access\");\n  }\n} else if (window.web3) {\n  // 老版 MetaMask Legacy dapp browsers...\n  web3Provider = window.web3.currentProvider;\n} else {\n  web3Provider = new Web3.providers.HttpProvider('http://localhost:8545');\n}\nweb3 = new Web3(web3Provider);\n\n/*\nwindow.addEventListener('load', async () => {\n    // Modern dapp browsers...\n    if (window.ethereum) {\n        window.web3 = new Web3(ethereum);\n        try {\n            // Request account access if needed\n            await ethereum.enable();\n            // Acccounts now exposed\n            web3.eth.sendTransaction({/!* ... *!/});\n        } catch (error) {\n            // User denied account access...\n        }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        window.web3 = new Web3(web3.currentProvider);\n        // Acccounts always exposed\n        web3.eth.sendTransaction({/!* ... *!/});\n    }\n    // Non-dapp browsers...\n    else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n});\n*/\n\n//export导出，es6语法，default标识默认导出，在使用时，名字可以改变\n//使用时，使用import\nexport default web3;","map":{"version":3,"names":["Web3","require","web3","web3Provider","window","ethereum","enable","error","console","currentProvider","providers","HttpProvider"],"sources":["D:/Desktop/by/github/funding/src/utils/InitWeb3.js"],"sourcesContent":["let Web3 = require('web3');\n\n//let web3 = new Web3(window.web3.currentProvider)\nlet web3 = new Web3('http://localhost:8545')\n\n/*if (window.ethereum) {\n    // 请求用户授权\n    window.ethereum.enable(function(){\n        web3.eth.getAccounts((error, accounts) => {\n            web3.eth.defaultAccount = accounts[0];\n            console.log(accounts)\n        })\n    })\n\n} else  if (typeof web3 !== 'undefined') {\n    const web3 = new Web3(web3.currentProvider);\n    web3.eth.defaultAccount = web3.eth.accounts[0];\n    console.log(web3.eth.defaultAccount);\n} else {\n    // set the provider you want from Web3.providers\n    const web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));\n}*/\n\n// 检查是否是新的MetaMask 或 DApp浏览器\nvar web3Provider;\nif (window.ethereum) {\n    web3Provider = window.ethereum;\n    try {\n        // 请求用户授权\n        await window.ethereum.enable();\n    } catch (error) {\n        // 用户不授权时\n        console.error(\"User denied account access\")\n    }\n} else if (window.web3) {   // 老版 MetaMask Legacy dapp browsers...\n    web3Provider = window.web3.currentProvider;\n} else {\n    web3Provider = new Web3.providers.HttpProvider('http://localhost:8545');\n}\nweb3 = new Web3(web3Provider);\n\n\n\n/*\nwindow.addEventListener('load', async () => {\n    // Modern dapp browsers...\n    if (window.ethereum) {\n        window.web3 = new Web3(ethereum);\n        try {\n            // Request account access if needed\n            await ethereum.enable();\n            // Acccounts now exposed\n            web3.eth.sendTransaction({/!* ... *!/});\n        } catch (error) {\n            // User denied account access...\n        }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        window.web3 = new Web3(web3.currentProvider);\n        // Acccounts always exposed\n        web3.eth.sendTransaction({/!* ... *!/});\n    }\n    // Non-dapp browsers...\n    else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n});\n*/\n\n\n\n\n//export导出，es6语法，default标识默认导出，在使用时，名字可以改变\n//使用时，使用import\nexport default web3;\n"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;;AAE1B;AACA,IAAIC,IAAI,GAAG,IAAIF,IAAI,CAAC,uBAAuB,CAAC;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAIG,YAAY;AAChB,IAAIC,MAAM,CAACC,QAAQ,EAAE;EACjBF,YAAY,GAAGC,MAAM,CAACC,QAAQ;EAC9B,IAAI;IACA;IACA,MAAMD,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;EAClC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ;IACAC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAC;EAC/C;AACJ,CAAC,MAAM,IAAIH,MAAM,CAACF,IAAI,EAAE;EAAI;EACxBC,YAAY,GAAGC,MAAM,CAACF,IAAI,CAACO,eAAe;AAC9C,CAAC,MAAM;EACHN,YAAY,GAAG,IAAIH,IAAI,CAACU,SAAS,CAACC,YAAY,CAAC,uBAAuB,CAAC;AAC3E;AACAT,IAAI,GAAG,IAAIF,IAAI,CAACG,YAAY,CAAC;;AAI7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA;AACA;AACA,eAAeD,IAAI"},"metadata":{},"sourceType":"module"}