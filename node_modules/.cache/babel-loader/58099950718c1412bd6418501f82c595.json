{"ast":null,"code":"var Web3 = require('web3');\n\n//let web3 = new Web3(window.web3.currentProvider)\nvar web3 = new Web3('http://localhost:8545');\n\n/*if (window.ethereum) {\n    // 请求用户授权\n    window.ethereum.request(function(){\n        web3.eth.getAccounts((error, accounts) => {\n            web3.eth.defaultAccount = accounts[0];\n            console.log(accounts)\n        })\n    })\n\n} else  if (typeof web3 !== 'undefined') {\n    const web3 = new Web3(web3.currentProvider);\n    web3.eth.defaultAccount = web3.eth.accounts[0];\n    console.log(web3.eth.defaultAccount);\n} else {\n    // set the provider you want from Web3.providers\n    const web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));\n}*/\n\ntry {\n  // Request account access\n  await window.ethereum.request({\n    method: 'eth_requestAccounts'\n  });\n  console.log('Connected to Metamask');\n} catch (error) {\n  console.error('Error connecting to Metamask', error);\n}\n\n/*\n// 检查是否是新的MetaMask 或 DApp浏览器\nvar web3Provider;\nif (window.ethereum) {\n    web3Provider = window.ethereum;\n    try {\n        // 请求用户授权\n        await window.ethereum.enable();\n    } catch (error) {\n        // 用户不授权时\n        console.error(\"User denied account access\")\n    }\n} else if (window.web3) {   // 老版 MetaMask Legacy dapp browsers...\n    web3Provider = window.web3.currentProvider;\n} else {\n    web3Provider = new Web3.providers.HttpProvider('http://localhost:8545');\n}\nweb3 = new Web3(web3Provider);\n*/\n\n/*async function login(){\n\n    if (typeof window.ethereum !== 'undefined') {\n\n        let addr=await window.ethereum.request({ method: 'eth_requestAccounts' });//授权连接钱包\n\n        console.log('用户钱包地址:',addr[0]);\n\n    }else{\n\n        console.log('未安装钱包插件！');\n\n    }\n\n}\n\nlogin();*/\n\n/*\nwindow.addEventListener('load', async () => {\n    // Modern dapp browsers...\n    if (window.ethereum) {\n        window.web3 = new Web3(ethereum);\n        try {\n            // Request account access if needed\n            await ethereum.enable();\n            // Acccounts now exposed\n            web3.eth.sendTransaction({/!* ... *!/});\n        } catch (error) {\n            // User denied account access...\n        }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        window.web3 = new Web3(web3.currentProvider);\n        // Acccounts always exposed\n        web3.eth.sendTransaction({/!* ... *!/});\n    }\n    // Non-dapp browsers...\n    else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n});\n*/\n\n/*async function connectMetamask() {\n    window.ethereum.enable()\n        .then(async (rs) => {\n            setMyAccount(rs[0])\n            let balance = await web3.current.eth.getBalance(accounts[0]);\n            setBalance(web3.current.utils.fromWei(balance))\n        })\n}*/\n\n//export导出，es6语法，default标识默认导出，在使用时，名字可以改变\n//使用时，使用import\nexport default web3;","map":{"version":3,"names":["Web3","require","web3","window","ethereum","request","method","console","log","error"],"sources":["D:/Desktop/by/github/funding/src/utils/InitWeb3.js"],"sourcesContent":["let Web3 = require('web3');\n\n//let web3 = new Web3(window.web3.currentProvider)\nlet web3 = new Web3('http://localhost:8545')\n\n/*if (window.ethereum) {\n    // 请求用户授权\n    window.ethereum.request(function(){\n        web3.eth.getAccounts((error, accounts) => {\n            web3.eth.defaultAccount = accounts[0];\n            console.log(accounts)\n        })\n    })\n\n} else  if (typeof web3 !== 'undefined') {\n    const web3 = new Web3(web3.currentProvider);\n    web3.eth.defaultAccount = web3.eth.accounts[0];\n    console.log(web3.eth.defaultAccount);\n} else {\n    // set the provider you want from Web3.providers\n    const web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));\n}*/\n\ntry {\n    // Request account access\n    await window.ethereum.request({ method: 'eth_requestAccounts' });\n    console.log('Connected to Metamask');\n} catch (error) {\n    console.error('Error connecting to Metamask', error);\n}\n\n\n\n\n\n/*\n// 检查是否是新的MetaMask 或 DApp浏览器\nvar web3Provider;\nif (window.ethereum) {\n    web3Provider = window.ethereum;\n    try {\n        // 请求用户授权\n        await window.ethereum.enable();\n    } catch (error) {\n        // 用户不授权时\n        console.error(\"User denied account access\")\n    }\n} else if (window.web3) {   // 老版 MetaMask Legacy dapp browsers...\n    web3Provider = window.web3.currentProvider;\n} else {\n    web3Provider = new Web3.providers.HttpProvider('http://localhost:8545');\n}\nweb3 = new Web3(web3Provider);\n*/\n\n/*async function login(){\n\n    if (typeof window.ethereum !== 'undefined') {\n\n        let addr=await window.ethereum.request({ method: 'eth_requestAccounts' });//授权连接钱包\n\n        console.log('用户钱包地址:',addr[0]);\n\n    }else{\n\n        console.log('未安装钱包插件！');\n\n    }\n\n}\n\nlogin();*/\n\n/*\nwindow.addEventListener('load', async () => {\n    // Modern dapp browsers...\n    if (window.ethereum) {\n        window.web3 = new Web3(ethereum);\n        try {\n            // Request account access if needed\n            await ethereum.enable();\n            // Acccounts now exposed\n            web3.eth.sendTransaction({/!* ... *!/});\n        } catch (error) {\n            // User denied account access...\n        }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        window.web3 = new Web3(web3.currentProvider);\n        // Acccounts always exposed\n        web3.eth.sendTransaction({/!* ... *!/});\n    }\n    // Non-dapp browsers...\n    else {\n        console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n});\n*/\n\n\n/*async function connectMetamask() {\n    window.ethereum.enable()\n        .then(async (rs) => {\n            setMyAccount(rs[0])\n            let balance = await web3.current.eth.getBalance(accounts[0]);\n            setBalance(web3.current.utils.fromWei(balance))\n        })\n}*/\n\n//export导出，es6语法，default标识默认导出，在使用时，名字可以改变\n//使用时，使用import\nexport default web3;\n"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;;AAE1B;AACA,IAAIC,IAAI,GAAG,IAAIF,IAAI,CAAC,uBAAuB,CAAC;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI;EACA;EACA,MAAMG,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC;IAAEC,MAAM,EAAE;EAAsB,CAAC,CAAC;EAChEC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;AACxC,CAAC,CAAC,OAAOC,KAAK,EAAE;EACZF,OAAO,CAACE,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;AACxD;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAeP,IAAI"},"metadata":{},"sourceType":"module"}